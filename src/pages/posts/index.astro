---
import Base from "@layouts/Base.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("posts"))
    .filter((p) => !p.data.draft)
    .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<Base title="Posts">
    <main class="mx-auto max-w-2xl p-6 space-y-6">
        <h1 class="text-2xl font-semibold">Posts</h1>

        <ul class="space-y-4">
            {posts.map((post) => (
                    <li>
                        <a
                                href={`/posts/${post.slug}/`}
                                class="text-lg underline hover:no-underline"
                        >
                            {post.data.title}
                        </a>
                        <p class="text-sm opacity-70">{post.data.description}</p>
                    </li>
            ))}
        </ul>
    </main>
</Base>